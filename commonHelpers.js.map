{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport { getImages, itemsPerPage };\n\nlet itemsPerPage = 15;\nasync function getImages(query, page = 1) {\n  const BASE_URL = 'https://pixabay.com/';\n  const END_POINT = 'api/';\n  const { data } = await axios.get(`${BASE_URL}${END_POINT}`, {\n    params: {\n      key: '11118529-f58244b993118eb30b9529deb',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: itemsPerPage,\n      page,\n    },\n  });\n  return data;\n}\n","export default createMarkup;\n\nfunction createMarkup(galleryItems) {\n  return galleryItems\n    .map(\n      ({\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <div class=\"gallery-item-image\">\n          <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n          </div>\n          <ul class=\"image-details\">\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Likes</h2>\n              <p class=\"image-details-value\">${likes}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Views</h2>\n              <p class=\"image-details-value\">${views}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Comments</h2>\n              <p class=\"image-details-value\">${comments}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Downloads</h2>\n              <p class=\"image-details-value\">${downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n      }\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages, itemsPerPage } from './js/pixabay-api';\nimport createMarkup from './js/render-functions';\n\nconst toggleVisibility = (element, isVisible) => {\n  element.classList.toggle('is-visible', isVisible);\n  if (element === galleryRenderer.moreBtn) {\n    element.disabled = !isVisible;\n  }\n};\nconst showLoadMore = () => toggleVisibility(galleryRenderer.moreBtn, true);\nconst hideLoadMore = () => toggleVisibility(galleryRenderer.moreBtn, false);\nconst showLoader = () => toggleVisibility(galleryRenderer.loader, true);\nconst hideLoader = () => toggleVisibility(galleryRenderer.loader, false);\n\nconst iziToastConfig = {\n  color: 'red',\n  position: 'topRight',\n  timeout: 3000,\n  progressBar: false,\n};\nconst popups = {\n  show(message) {\n    iziToast.show({\n      ...iziToastConfig,\n      message,\n    });\n  },\n  emptyQueryError() {\n    this.show('❌ Please enter a search query');\n  },\n  reachedLimitError() {\n    this.show(`❌ We're sorry, but you've reached the end of search results.`);\n  },\n  noResultsError() {\n    this.show(\n      '❌ Sorry, there are no images matching your search query. Please try again!'\n    );\n  },\n};\n\nconst galleryRenderer = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  moreBtn: document.querySelector('.load-more-button'),\n};\n\ngalleryRenderer.form.addEventListener('submit', onSubmit);\ngalleryRenderer.moreBtn.addEventListener('click', onLoadMore);\n\nlet currentQuery = '';\nlet page;\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  hideLoadMore();\n  page = 1;\n  currentQuery = e.target.elements['search-input'].value.trim().toLowerCase();\n  galleryRenderer.gallery.innerHTML = '';\n\n  if (!currentQuery) {\n    hideLoadMore();\n    popups.emptyQueryError();\n    return;\n  }\n\n  galleryRenderer.form.reset();\n  showLoader();\n\n  getImages(currentQuery, page)\n    .then(data => {\n      hideLoader();\n      if (!data.hits.length) {\n        popups.noResultsError();\n        return;\n      }\n\n      galleryRenderer.gallery.insertAdjacentHTML(\n        'beforeend',\n        createMarkup(data.hits)\n      );\n\n      if (data.totalHits > itemsPerPage) {\n        showLoadMore();\n      }\n      lightbox.refresh();\n    })\n    .catch(error => {\n      popups.show(`❌ ${error.message}`);\n    });\n}\n\nconst lightbox = new SimpleLightbox('.gallery-item-image a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction onLoadMore() {\n  page += 1;\n  hideLoadMore();\n  showLoader();\n\n  getImages(currentQuery, page)\n    .then(data => {\n      hideLoader();\n      galleryRenderer.gallery.insertAdjacentHTML(\n        'beforeend',\n        createMarkup(data.hits)\n      );\n\n      if (data.totalHits > itemsPerPage * page) {\n        showLoadMore();\n        const galleryCard = document.querySelector('.gallery-item');\n        const cardHeight = galleryCard.getBoundingClientRect().height;\n        window.scrollBy({\n          left: 0,\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      } else {\n        popups.reachedLimitError();\n      }\n      lightbox.refresh();\n    })\n    .catch(error => {\n      hideLoader();\n      popups.show(`❌ ${error.message}`);\n    });\n}\n"],"names":["itemsPerPage","getImages","query","page","BASE_URL","END_POINT","data","axios","createMarkup","galleryItems","webformatURL","tags","likes","views","comments","downloads","largeImageURL","toggleVisibility","element","isVisible","galleryRenderer","showLoadMore","hideLoadMore","showLoader","hideLoader","iziToastConfig","popups","message","iziToast","onSubmit","onLoadMore","currentQuery","e","lightbox","error","SimpleLightbox","cardHeight"],"mappings":"owBAGA,IAAIA,EAAe,GACnB,eAAeC,EAAUC,EAAOC,EAAO,EAAG,CACxC,MAAMC,EAAW,uBACXC,EAAY,OACZ,CAAE,KAAAC,GAAS,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGC,CAAS,GAAI,CAC1D,OAAQ,CACN,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAG,CACD,CACL,CAAG,EACD,OAAOG,CACT,CCjBA,SAASE,EAAaC,EAAc,CAClC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,cAAAC,CACR,IACe;AAAA;AAAA,qBAEMA,CAAa,eAAeN,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+CAK5BC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,+CAIRC,CAAS;AAAA;AAAA;AAAA,cAKnD,EACA,KAAK,EAAE,CACZ,CCjCA,MAAME,EAAmB,CAACC,EAASC,IAAc,CAC/CD,EAAQ,UAAU,OAAO,aAAcC,CAAS,EAC5CD,IAAYE,EAAgB,UAC9BF,EAAQ,SAAW,CAACC,EAExB,EACME,EAAe,IAAMJ,EAAiBG,EAAgB,QAAS,EAAI,EACnEE,EAAe,IAAML,EAAiBG,EAAgB,QAAS,EAAK,EACpEG,EAAa,IAAMN,EAAiBG,EAAgB,OAAQ,EAAI,EAChEI,EAAa,IAAMP,EAAiBG,EAAgB,OAAQ,EAAK,EAEjEK,EAAiB,CACrB,MAAO,MACP,SAAU,WACV,QAAS,IACT,YAAa,EACf,EACMC,EAAS,CACb,KAAKC,EAAS,CACZC,EAAS,KAAK,CACZ,GAAGH,EACH,QAAAE,CACN,CAAK,CACF,EACD,iBAAkB,CAChB,KAAK,KAAK,+BAA+B,CAC1C,EACD,mBAAoB,CAClB,KAAK,KAAK,8DAA8D,CACzE,EACD,gBAAiB,CACf,KAAK,KACH,4EACN,CACG,CACH,EAEMP,EAAkB,CACtB,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,mBAAmB,CACrD,EAEAA,EAAgB,KAAK,iBAAiB,SAAUS,CAAQ,EACxDT,EAAgB,QAAQ,iBAAiB,QAASU,CAAU,EAE5D,IAAIC,EAAe,GACf5B,EAEJ,SAAS0B,EAASG,EAAG,CAOnB,GANAA,EAAE,eAAc,EAChBV,IACAnB,EAAO,EACP4B,EAAeC,EAAE,OAAO,SAAS,cAAc,EAAE,MAAM,OAAO,cAC9DZ,EAAgB,QAAQ,UAAY,GAEhC,CAACW,EAAc,CACjBT,IACAI,EAAO,gBAAe,EACtB,MACD,CAEDN,EAAgB,KAAK,QACrBG,IAEAtB,EAAU8B,EAAc5B,CAAI,EACzB,KAAKG,GAAQ,CAEZ,GADAkB,IACI,CAAClB,EAAK,KAAK,OAAQ,CACrBoB,EAAO,eAAc,EACrB,MACD,CAEDN,EAAgB,QAAQ,mBACtB,YACAZ,EAAaF,EAAK,IAAI,CAC9B,EAEUA,EAAK,UAAYN,GACnBqB,IAEFY,EAAS,QAAO,CACtB,CAAK,EACA,MAAMC,GAAS,CACdR,EAAO,KAAK,KAAKQ,EAAM,OAAO,EAAE,CACtC,CAAK,CACL,CAEA,MAAMD,EAAW,IAAIE,EAAe,wBAAyB,CAC3D,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASL,GAAa,CACpB3B,GAAQ,EACRmB,IACAC,IAEAtB,EAAU8B,EAAc5B,CAAI,EACzB,KAAKG,GAAQ,CAOZ,GANAkB,IACAJ,EAAgB,QAAQ,mBACtB,YACAZ,EAAaF,EAAK,IAAI,CAC9B,EAEUA,EAAK,UAAYN,EAAeG,EAAM,CACxCkB,IAEA,MAAMe,EADc,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OACvD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QACpB,CAAS,CACT,MACQV,EAAO,kBAAiB,EAE1BO,EAAS,QAAO,CACtB,CAAK,EACA,MAAMC,GAAS,CACdV,IACAE,EAAO,KAAK,KAAKQ,EAAM,OAAO,EAAE,CACtC,CAAK,CACL"}