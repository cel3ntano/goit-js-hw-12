{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport { getImages, itemsPerPage };\n\nlet itemsPerPage = 15;\nasync function getImages(query, page = 1) {\n  const BASE_URL = 'https://pixabay.com/';\n  const END_POINT = 'api/';\n  const { data } = await axios.get(`${BASE_URL}${END_POINT}`, {\n    params: {\n      key: '11118529-f58244b993118eb30b9529deb',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: itemsPerPage,\n      page,\n    },\n  });\n  return data;\n}\n","export default createMarkup;\n\nfunction createMarkup(galleryItems) {\n  return galleryItems\n    .map(\n      ({\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <div class=\"gallery-item-image\">\n          <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n          </div>\n          <ul class=\"image-details\">\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Likes</h2>\n              <p class=\"image-details-value\">${likes}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Views</h2>\n              <p class=\"image-details-value\">${views}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Comments</h2>\n              <p class=\"image-details-value\">${comments}</p>\n            </li>\n            <li class=\"image-details-item\">\n              <h2 class=\"image-details-title\">Downloads</h2>\n              <p class=\"image-details-value\">${downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n      }\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImages, itemsPerPage } from './js/pixabay-api';\nimport createMarkup from './js/render-functions';\n\nconst galleryRenderer = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  moreBtn: document.querySelector('.load-more-button'),\n};\n\ngalleryRenderer.form.addEventListener('submit', onSubmit);\ngalleryRenderer.moreBtn.addEventListener('click', onLoadMore);\nlet currentQuery = '';\nlet page;\nfunction onSubmit(e) {\n  page = 1;\n  e.preventDefault();\n  galleryRenderer.gallery.innerHTML = '';\n  const searchQuery = e.target.elements['search-input'].value\n    .trim()\n    .toLowerCase();\n  currentQuery = searchQuery;\n  if (!searchQuery) {\n    galleryRenderer.moreBtn.classList.remove('is-visible');\n    iziToast.show({\n      message: '❌ Please enter a search query',\n      color: 'red',\n      position: 'topRight',\n      timeout: 2000,\n      progressBar: false,\n    });\n  } else {\n    galleryRenderer.form.reset();\n    galleryRenderer.loader.classList.add('is-visible');\n\n    getImages(searchQuery, page)\n      .then(data => {\n        if (!data.hits.length) {\n          galleryRenderer.loader.classList.remove('is-visible');\n          iziToast.show({\n            message:\n              '❌ Sorry, there are no images matching your search query. Please try again!',\n            color: 'red',\n            position: 'topRight',\n            timeout: 2000,\n            progressBar: false,\n          });\n        } else {\n          galleryRenderer.loader.classList.remove('is-visible');\n          galleryRenderer.gallery.insertAdjacentHTML(\n            'beforeend',\n            createMarkup(data.hits)\n          );\n          if (data.totalHits <= itemsPerPage) {\n            return;\n          }\n          galleryRenderer.moreBtn.classList.add('is-visible');\n        }\n        lightbox.refresh();\n      })\n      .catch(error => {\n        alert(error.message);\n      });\n  }\n}\n\nconst lightbox = new SimpleLightbox('.gallery-item-image a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction onLoadMore() {\n  page += 1;\n  galleryRenderer.moreBtn.disabled = true;\n  galleryRenderer.moreBtn.classList.remove('is-visible');\n  galleryRenderer.loader.classList.add('is-visible');\n\n  getImages(currentQuery, page)\n    .then(data => {\n      galleryRenderer.gallery.insertAdjacentHTML(\n        'beforeend',\n        createMarkup(data.hits)\n      );\n      galleryRenderer.moreBtn.disabled = false;\n      galleryRenderer.moreBtn.classList.add('is-visible');\n      galleryRenderer.loader.classList.remove('is-visible');\n\n      if (data.totalHits >= itemsPerPage * page) {\n        galleryRenderer.moreBtn.classList.add('is-visible');\n        const galleryCard = document.querySelector('.gallery-item');\n        const cardHeight = galleryCard.getBoundingClientRect().height;\n        window.scrollBy({\n          left: 0,\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n        lightbox.refresh();\n\n        return;\n      }\n      galleryRenderer.moreBtn.classList.remove('is-visible');\n      iziToast.show({\n        message: `❌ We're sorry, but you've reached the end of search results.`,\n        color: 'red',\n        position: 'topRight',\n        timeout: 2000,\n        progressBar: false,\n      });\n    })\n    .catch(error => {\n      alert(error.message);\n    });\n}\n"],"names":["itemsPerPage","getImages","query","page","BASE_URL","END_POINT","data","axios","createMarkup","galleryItems","webformatURL","tags","likes","views","comments","downloads","largeImageURL","galleryRenderer","onSubmit","onLoadMore","currentQuery","e","searchQuery","iziToast","lightbox","error","SimpleLightbox","cardHeight"],"mappings":"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"}